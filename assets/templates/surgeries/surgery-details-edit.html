{% extends 'base.html' %}
{% load static %}

{% block content %}

    <div id="kt_app_toolbar" class="app-toolbar pt-4 pt-lg-7 mb-n2 mb-lg-n3">
        <div id="kt_app_toolbar_container" class="container-xxl d-flex flex-stack flex-row-fluid">
            <div class="d-flex flex-stack flex-row-fluid">
                <div class="d-flex flex-column flex-row-fluid">
                    <ul class="breadcrumb breadcrumb-separatorless fw-semibold mb-1 mb-lg-3 me-2">
                        <li class="breadcrumb-item text-gray-700 fw-bold lh-1">
                            <a href="/" class="text-white">
                                <i class="fonticon-home text-gray-700 fs-3"></i>
                            </a>
                        </li>
                        <li class="breadcrumb-item">
                            <span class="svg-icon svg-icon-5 svg-icon-gray-700 mx-n2">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <path
                                        d="M12.6343 12.5657L8.45001 16.75C8.0358 17.1642 8.0358 17.8358 8.45001 18.25C8.86423 18.6642 9.5358 18.6642 9.95001 18.25L15.4929 12.7071C15.8834 12.3166 15.8834 11.6834 15.4929 11.2929L9.95001 5.75C9.5358 5.33579 8.86423 5.33579 8.45001 5.75C8.0358 6.16421 8.0358 6.83579 8.45001 7.25L12.6343 11.4343C12.9467 11.7467 12.9467 12.2533 12.6343 12.5657Z"
                                        fill="currentColor" />
                                </svg>
                            </span>
                        </li>
                        <li class="breadcrumb-item text-gray-700 fw-bold lh-1">Surgeries</li>
                        <li class="breadcrumb-item">
                            <span class="svg-icon svg-icon-5 svg-icon-gray-700 mx-n2">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <path
                                        d="M12.6343 12.5657L8.45001 16.75C8.0358 17.1642 8.0358 17.8358 8.45001 18.25C8.86423 18.6642 9.5358 18.6642 9.95001 18.25L15.4929 12.7071C15.8834 12.3166 15.8834 11.6834 15.4929 11.2929L9.95001 5.75C9.5358 5.33579 8.86423 5.33579 8.45001 5.75C8.0358 6.16421 8.0358 6.83579 8.45001 7.25L12.6343 11.4343C12.9467 11.7467 12.9467 12.2533 12.6343 12.5657Z"
                                        fill="currentColor" />
                                </svg>
                            </span>
                        </li>
                        <li class="breadcrumb-item text-gray-700 fw-bold lh-1">Edit</li>
                    </ul>
                </div>
                <div class="d-flex align-items-center gap-3">
                    <a href="{% url 'surgeries_list' %}" class="btn btn-flex btn-sm btn-body h-35px bg-body fw-bold">
                        <i class="bi bi-arrow-left"></i>Go back to surgeries
                    </a>
                </div>
            </div>
        </div>
    </div>
    <div class="container-xxl d-flex ">
        <div id="kt_app_sidebar" class="app-sidebar align-self-start" data-kt-drawer="true"
            data-kt-drawer-name="app-sidebar" data-kt-drawer-activate="{default: true, lg: false}"
            data-kt-drawer-overlay="true" data-kt-drawer-width="{default:'200px', '300px': '225px'}"
            data-kt-drawer-direction="start" data-kt-drawer-toggle="#kt_app_sidebar_mobile_toggle">
            <div class="card flex-grow-1 py-5" data-kt-sticky="true" data-kt-sticky-name="app-sidebar-menu-sticky"
                data-kt-sticky-offset="{default: false, xl: '500px'}" data-kt-sticky-width="225px"
                data-kt-sticky-left="auto" data-kt-sticky-top="125px" data-kt-sticky-animation="false"
                data-kt-sticky-zindex="95">
                <div class="hover-scroll-y px-1 px-lg-5" data-kt-scroll="true"
                    data-kt-scroll-activate="{default: false, lg: true}" data-kt-scroll-height="auto"
                    data-kt-scroll-dependencies="#kt_app_header, #kt_app_toolbar, #kt_app_footer"
                    data-kt-scroll-wrappers="#kt_app_main" data-kt-scroll-offset="5px" style="height: 362px;">
                    <div id="kt_app_sidebar_menu" data-kt-menu="true" class="
                            menu
                            menu-sub-indention
                            menu-rounded
                            menu-column
                            menu-active-bg
                            menu-title-gray-600
                            menu-icon-gray-400
                            menu-state-primary
                            menu-arrow-gray-500
                            fw-semibold
                            fs-6
                        ">
                        <div class="menu-item">
                            <a href = "{% url 'surgeries_details_edit' caseid %}" class="menu-link" id="SurgeryDetailsBtn">
                                <span class="menu-icon"><i class="bi bi-heart-pulse text-primary"></i></span>
                                <span class="menu-title">Details</span>
                            </a>
                        </div>
                        <div class="menu-item">
                            <a href="{% url 'surgery_patient_diagnostics_edit' caseid %}" class="menu-link" id="SurgeryReportsBtn">
                                <span class="menu-icon"><i class="bi bi-clipboard2-pulse text-success"></i></span>
                                <span class="menu-title">Patient Diagnostics</span>
                            </a>
                        </div>
                        <div class="menu-item">
                            <a href="{% url 'surgery_physician_notes_edit' caseid %}" class="menu-link" id="PhysicianNotesBtn">
                                <span class="menu-icon"><i class="bi bi-prescription text-info"></i></span>
                                <span class="menu-title">Physician Notes</span>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="app-main flex-column flex-row-fluid" id="kt_app_main">
            <div class="d-flex flex-column flex-column-fluid">
                <div id="kt_app_content" class="app-content">
                    <div class="form d-flex flex-column flex-lg-row fv-plugins-bootstrap5 fv-plugins-framework">
                        <div class="d-flex flex-column flex-row-fluid gap-7 gap-lg-10">
                            <div class="d-flex flex-column gap-7 gap-lg-10">
                                <div id="SurgeryDetails" class="card card-flush py-4">
                                    <div class="card-header">
                                        <div class="card-title">
                                            <span class="menu-icon"><i class="bi bi-heart-pulse text-primary fs-1 me-1"></i></span>
                                            <h2>Surgery Details</h2>
                                        </div>
                                    </div>
                                    <div class="card-body pt-0">
                                        <form id="" method="post">
                                            {% csrf_token %}
                                            <input type="hidden" data-val="true"
                                                data-val-required="The hosid field is required." id="hosid" name="hosid"
                                                value="{{hosid}}" />
                                            <input type="hidden" data-val="true"
                                                data-val-required="The caseid field is required." id="caseid" name="caseid"
                                                value="{{caseid}}" />

                                            <div class="d-flex flex-wrap gap-5">
                                                <div class="fv-row w-100 flex-md-root fv-plugins-icon-container">
                                                    <label class="required form-label">Diagnostics</label>
                                                    <input type="text" class="form-control mb-2 isrequired"
                                                        placeholder="Diagnostics" data-val="true"
                                                        data-val-required="Case Name is required" id="casename"
                                                        name="casename" value="{{casename}}">
                                                </div>
                                                <div class="fv-row w-100 flex-md-root">
                                                    <label class="required form-label">Patient name</label>
                                                    <input type="text" class="form-control mb-2 isrequired"
                                                        placeholder="Patient name" data-val="true"
                                                        data-val-required="Patient Name is required" id="patientname"
                                                        name="patientname" value="{{patientname}}">
                                                    <div class="fv-plugins-message-container invalid-feedback"></div>
                                                </div>

                                            </div>
                                            <div class="d-flex flex-wrap gap-5">
                                                <div class="fv-row w-100 flex-md-root">
                                                    <label class="required form-label">Age</label>
                                                    <input type="text" class="form-control mb-2 numberonly isrequired"
                                                        placeholder="Age" data-val="true"
                                                        data-val-required="Age is required" id="age" name="age" value="{{age}}">
                                                    <div class="fv-plugins-message-container invalid-feedback"></div>
                                                </div>
                                                <div class="fv-row w-100 flex-md-root">
                                                    <label class="required form-label">Gender</label>
                                                    <select class="form-select" name="gender"  data-dropdown-css-class="w-300px" data-hide-search="true" data-allow-clear="true" data-control="select2" data-placeholder="Select status">
                                                        <option value="" {% if gender is not defined %} selected {% endif %}>Select gender</option>
                                                        <option value="M" {% if gender == 'M' %} selected {% endif %}>Male</option>
                                                        <option value="F" {% if gender == 'F' %} selected {% endif %}>Female</option>
                                                        <option value="O" {% if gender == 'O' %} selected {% endif %}>Others</option>
                                                    </select>
                                                    <div class="fv-plugins-message-container invalid-feedback"></div>
                                                </div>
                                            </div>
                                            <div class="d-flex flex-wrap gap-5">
                                                <div class="fv-row w-100 flex-md-root">
                                                    <label class="required form-label">Surgeon Name</label>
                                                    <select class="form-select isrequired" data-allow-clear="true"
                                                            data-control="select2" data-placeholder="Select Surgeon"
                                                            data-val="true" data-val-required="Surgeon Name is required"
                                                            id="surgeon_name" name="surgeon_name">
                                                        <option></option>
                                                        {% for i in surgeon_name_dropdown_data %}
                                                            <option value="{{ i.surgonid }}" {% if i.surgonid == surgonid %}selected{% endif %}>{{ i.surgonsname }}</option>
                                                        {% endfor %}
                                                        <option value="other">Other</option>
                                                    </select>
                                                </div>
                                                <div class="fv-row w-100 flex-md-root">
                                                    <label class="form-label">Surgery Date</label>
                                                    <div class="input-group date" id="surgerydatetimepicker"
                                                        data-target-input="nearest">
                                                        <input autocomplete="" type="datetime-local"
                                                            class="form-control "
                                                            data-target="#surgerydatetimepicker" placeholder="Surgery date"
                                                            data-val="true"
                                                            data-val-required="The surgerydate field is required."
                                                            id="surgerydate" name="surgerydate"
                                                            value="{{surgerydate}}" />
                                                        <span class="input-group-text" data-target="#surgerydatetimepicker"
                                                            data-toggle="datetimepicker">
                                                            <i class="bi bi-calendar3"><span class="path1"></span><span
                                                                    class="path2"></span></i>
                                                        </span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="d-flex flex-wrap gap-5">
                                                <div class="fv-row w-100 flex-md-root">
                                                    <label class="required form-label">Surgery</label>
                                                    <select multiple="multiple" class="form-select isrequired"
                                                        data-allow-clear="true" data-control="select2"
                                                        data-placeholder="Select Surgery" data-val="true"
                                                        data-val-required="Surgery type is required" id="surgery"
                                                        name="surgery">
                                                        <option></option>
                                                        {% for i in surgeon_dropdown_data %}
                                                            <option value="{{i.surgerytypeid}}" {% if i.surgerytypeid in surgery %}selected{% endif %}>{{i.name}}</option>
                                                        {% endfor %}
                                                    </select>
                                                    <div class="fv-plugins-message-container invalid-feedback"></div>
                                                </div>
                                                <div class="fv-row w-100 flex-md-root">
                                                    <label class="required form-label">Case Status</label>
                                                    <select class="form-select isrequired" data-hide-search="true"
                                                        data-allow-clear="true" data-control="select2"
                                                        data-placeholder="Select Case Status" data-val="true"
                                                        data-val-required="Case status is required" id="casestatus"
                                                        name="casestatus">
                                                        <option></option>
                                                        <option value="1"{% if casestatus == 1 %} selected {% endif %}>Emergency</option>
                                                        <option value="2"{% if casestatus == 2 %} selected {% endif %}>Elective</option>
                                                        <option value="3" {% if casestatus == 3 %} selected {% endif %}>Admitted</option>
                                                        <option value="4" {% if casestatus == 4 %} selected {% endif %}>Yet to admit</option>
                                                    </select>
                                                    <div class="fv-plugins-message-container invalid-feedback"></div>
                                                </div>
                                            </div>
                                            <div class="d-flex flex-wrap gap-5">
                                                <div class="fv-row w-100 flex-md-root">
                                                    <label class="required form-label">Surgery Speciality</label>
                                                    <select class="form-select isrequired" data-allow-clear="true"
                                                            data-control="select2" data-placeholder="Select Surgery"
                                                            data-val="true" data-val-required="Surgery Speciality is required"
                                                            id="speciality" name="speciality">
                                                        <option></option>
                                                        {% for i in speciality_dropdown_data %}
                                                            <option value="{{ i.id }}" {% if i.id == specialityid %}selected{% endif %}>{{ i.name }}</option>
                                                        {% endfor %}
                                                        <option value="other">Other</option>
                                                    </select>
                                                </div>
                                                <div class="fv-row w-100 flex-md-root">
                                                    <label class="form-label">PAC Status</label>
                                                    <select class="form-select isrequired" data-hide-search="true"
                                                        data-allow-clear="true" data-control="select2"
                                                        data-placeholder="Select PAC Status" data-val="true"
                                                        data-val-required="PAC Status is required" id="pacstatus"
                                                        name="pacstatus">
                                                        <option></option>
                                                        <option value="1"{% if pacstatus == '1' %} selected {% endif %}>Not Conducted</option>
                                                        <option value="2"{% if pacstatus == '2' %} selected {% endif %}>Required</option>
                                                        <option value="3"{% if pacstatus == '3' %} selected {% endif %}>Not Required</option>
                                                        <option value="4"{% if pacstatus == '4' %} selected {% endif %}>Online PAC</option>
                                                    </select>
                                                </div>
                                            </div><br>
                                            <div class="d-flex justify-content-end">
                                                <a href="{% url 'surgeries_list' %}">
                                                    <button type="reset" class="btn btn-light me-5" data-bs-dismiss="modal" id="">
                                                        <span class="indicator-label">
                                                            Cancel
                                                        </span>
                                                    </button>
                                                </a>
                                                <input class="btn btn-primary" type="submit">
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

{% endblock %}